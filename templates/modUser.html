{% load static %}

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Institucional de Encuestas - Instituto Tecnológico de Veracruz</title>
    <link rel="stylesheet" href="{% static '/styles/Anexo2.css' %}">
    <link rel="stylesheet" href="{% static '/styles/vistaSignUp.css' %}">
    
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.0/flowbite.min.js"></script>
</head>

</head>

<body>
    <div class="container">
        <div class="header">
            <img src="{% static 'img/sepB.png' %}" alt="logo de la SEP" height="150" />
            <div class="header-text">
                <div class="title">SISTEMA INSTITUCIONAL DE ENCUESTAS</div>
                <div class="subtitle">INSTITUTO TECNOLÓGICO DE VERACRUZ</div>
            </div>
        </div>

        <div class="form-section">
            <div class="section-title">MODIFICAR USUARIO</div>
        </div>

        <form action="/index/modCampos/" method="POST" id="mainForm" style="z-index: 800;">
            {% csrf_token %}

            <div class="form-content">
                {% if admin == 'si' %}
                <input type="hidden" name="real" value="{{ usuario.rfc}}">
                <div class="form-row">

                    <div class="form-column">
                        <div class="form-group">
                            <label class="form-label">Nombre completo:</label>
                            <div class="form-input">
                                <input type="text" style="text-transform: uppercase;" class="line-input" name="nombre"
                                    value="{{ usuario.nombre }}" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">RFC:</label>
                            <div class="form-input">
                                <input name="rfc" type="text" class="line-input" maxlength="13"
                                style="text-transform: uppercase;" value="{{ usuario.rfc }}" required>
                            </div>    
                        </div>

                        <div class="form-group">
                            <button data-modal-target="popup-modal" data-modal-toggle="popup-modal" class="block text-white bg-rede-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-0.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800 w-100 h-10" type="button">
                            RESTABLECER CONTRASEÑA
                            </button>
                        </div>
                            
                    </div>
                    
                    <div class="form-column">
                        <div class="form-group">
                            <label class="form-label">Correo Electrónico:</label>
                            <div class="form-input">
                                <input name="correo" type="email" class="line-input" value="{{ usuario.correo }}" id="email"
                                required>
                            </div>
                        </div>
                
                        <div class="form-group">
                            <label class="form-label" style="margin-top: 10px;">Carrera :</label>
                            <select id="carrera" name="carrera">
                                <option value="General" {% if usuario.carrera == "General" %}selected{% endif %}>
                                    General
                                </option>
                                <option value="Ing. Sistemas Computacionales"
                                {% if usuario.carrera == "Ing. Sistemas Computacionales" %}selected{% endif %}>
                                    Ing. Sistemas Computacionales
                                </option>
                                <option value="Ing. Química" 
                                {% if usuario.carrera == "Ing. Química" %}selected{% endif%}>
                                    Ing. Química
                                </option>
                                <option value="Ing. Bioquímica" 
                                {% if usuario.carrera == "Ing. Bioquímica"%}selected{%endif %}>
                                    Ing. Bioquímica
                                </option>
                                <option value="Ing. Industrial" 
                                {% if usuario.carrera == "Ing. Industrial"%}selected{%endif %}>
                                    Ing. Industrial
                                </option>
                                <option value="Ing. Mecatrónica" 
                                {% if usuario.carrera == "Ing. Mecatrónica"%}selected{%endif %}>
                                    Ing. Mecatrónica
                                </option>
                                <option value="Ing. Eléctrica" 
                                {% if usuario.carrera == "Ing. Eléctrica" %}selected{%endif%}>
                                    Ing. Eléctrica
                                </option>
                                <option value="Ing. Electrónica" 
                                {% if usuario.carrera == "Ing. Electrónica"%}selected{%endif %}>
                                    Ing. Electrónica
                                </option>
                                <option value="Ing. Mecánica" 
                                {% if usuario.carrera == "Ing. Mecánica" %}selected{%endif%}>
                                    Ing. Mecánica
                                </option>
                                <option value="Ing. Renovables" 
                                {% if usuario.carrera == "Ing. Renovables"%}selected{%endif %}>
                                    Ing. Renovables
                                </option>
                                <option value="Ing. Gestión Empresarial" 
                                {% if usuario.carrera == "Ing. Gestión Empresarial" %}selected{% endif %}>
                                    Ing. Gestión Empresarial
                                </option>
                                <option value="Lic. Administración" 
                                {% if usuario.carrera == "Lic. Administración"%}selected{% endif %}>
                                    Lic. Administración
                                </option>
                            </select>
                        </div>

                        

                    </div>
                </div>{% else %}
                <div class="form-row">
                    <div class="form-column">
                        <input type="hidden" name="real" value="{{ usuario.curp}}">
                        <div class="form-group">
                            <label class="form-label">Nombre completo:</label>
                            <div class="form-input">
                                <input type="text" style="text-transform: uppercase;" class="line-input" name="nombre"
                                    value="{{ usuario.nombre }}" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">CURP:</label>
                            <div class="form-input">
                                <input name="curp" type="text" class="line-input" maxlength="18" style="text-transform: uppercase;"
                                value="{{ usuario.curp }}" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Fecha de Nacimiento :</label>
                            <input name="fechaNacimiento" type="date" id="fechaNacimiento" 
                            value="{{ usuario.fechaNacimiento|date:'Y-m-d' }}" required />
                        </div>

                        <div class="form-group">
                            <label class="form-label">Titulado:</label>
                            <div class="radio-group">
                                <span class="radio-option">
                                    <input type="radio" name="titulado" value="si" id="tituladoSi" 
                                    {% if usuario.titulado %}checked{% endif%} required />
                                    <label for="tituladoSi">Si</label>
                                </span>
                                <span class="radio-option">
                                    <input type="radio" name="titulado" value="no" id="tituladoNo"  
                                    {% if not usuario.titulado %}checked{% endif%} required />
                                    <label for="tituladoNo">No</label>
                                </span>
                            </div>
                        </div>

                    </div>

                    <div class="form-column">
                        <div class="form-group">
                            <label class="form-label">No. Control:</label>
                            <div class="form-input">
                                <input name="control" type="text" class="line-input" value="{{ usuario.noControl }}" required pattern="[0-9]{7-9}" minlength="9" maxlength="9" inputmode="numeric" title="Ingrese entre 7 y 9 dígitos numéricos" />

                            </div>
                        </div>

                        <div class="form-group">
                                <label class="form-label">Correo Electrónico:</label>
                                <div class="form-input">
                                    <input name="correo" type="email" class="line-input" 
                                    value="{{ usuario.correo }}" required>
                                </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" style="margin-top: 10px;">Carrera :</label>
                            <select id="carrera" name="carrera">
                                <option value="Ing. Sistemas Computacionales"
                                {% if usuario.carrera == "Ing. Sistemas Computacionales" %}selected{% endif %}>
                                    Ing. Sistemas Computacionales
                                </option>
                                <option value="Ing. Química" 
                                {% if usuario.carrera == "Ing. Química" %}selected{% endif%}>
                                    Ing. Química
                                </option>
                                <option value="Ing. Bioquímica" 
                                {% if usuario.carrera == "Ing. Bioquímica"%}selected{%endif %}>
                                    Ing. Bioquímica
                                </option>
                                <option value="Ing. Industrial" 
                                {% if usuario.carrera == "Ing. Industrial"%}selected{%endif %}>
                                    Ing. Industrial
                                </option>
                                <option value="Ing. Mecatrónica" 
                                {% if usuario.carrera == "Ing. Mecatrónica"%}selected{%endif %}>
                                    Ing. Mecatrónica
                                </option>
                                <option value="Ing. Eléctrica" 
                                {% if usuario.carrera == "Ing. Eléctrica" %}selected{%endif%}>
                                    Ing. Eléctrica
                                </option>
                                <option value="Ing. Electrónica" 
                                {% if usuario.carrera == "Ing. Electrónica"%}selected{%endif %}>
                                    Ing. Electrónica
                                </option>
                                <option value="Ing. Mecánica" 
                                {% if usuario.carrera == "Ing. Mecánica" %}selected{%endif%}>
                                    Ing. Mecánica
                                </option>
                                <option value="Ing. Renovables" 
                                {% if usuario.carrera == "Ing. Renovables"%}selected{%endif %}>
                                    Ing. Renovables
                                </option>
                                <option value="Ing. Gestión Empresarial" 
                                {% if usuario.carrera == "Ing. Gestión Empresarial" %}selected{% endif %}>
                                    Ing. Gestión Empresarial
                                </option>
                                <option value="Lic. Administración" 
                                {% if usuario.carrera == "Lic. Administración"%}selected{% endif %}>
                                    Lic. Administración
                                </option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Sexo:</label>
                            <div class="radio-group">
                                <span class="radio-option">
                                    <input type="radio" name="sexo" value="femenino" id="sFemenino" 
                                    {% if usuario.sexo %}checked{% endif%} required />
                                    <label for="sFemenino">Femenino</label>
                                </span>
                                <span class="radio-option">
                                    <input type="radio" name="sexo" value="masculino" id="sMasculino" 
                                    {% if not usuario.sexo %}checked{% endif%} required />
                                    <label for="sMasculino">Masculino</label>
                                </span>
                            </div>
                        </div>
                    </div>
                
                </div>
                {% endif %}
            </div>
        </form>
        
        <div class="buttons">
            <form action="/index/consulta/" method="get">
                <button class="button">Regresar</button>
            </form>
            <button class="button" type="submit" form="mainForm" id="continuar">Guardar</button>
        </div>

        {% if error %}
        <div style="color: red; margin-bottom: 15px;">
                {{ error }}
        </div>
        {% endif %}

    </div>
    <div id="popup-modal" tabindex="-1" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
                            <div class="relative p-4 w-full max-w-md max-h-full">
                                <div class="relative bg-white rounded-lg shadow-sm dark:bg-gray-700 h-20 items-center" >
                                    <button type="button" class="absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-12 h-10 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="popup-modal">
                                        <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                                        </svg>
                                        <span class="sr-only">Close modal</span>
                                    </button>
                                    <div class="p-4 md:p-5 text-center mt-10">
                                        
                                        <h3 class="mb-5 mt-10 text-lg font-normal text-gray-500 dark:text-gray-400">
                                            ¿Estas seguro que quieres restablecer la contraseña?</h3>
                                        <form action="/index/newPwd/" method="post" id="modId">
                                            {% csrf_token %}
                                            <input type="hidden" name="personal" value="{{ usuario.rfc }}">
                                        </form>
                                        <button form="modId" data-modal-hide="popup-modal" type="submit" class="text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-0.5 text-center  w-27 h-8 ">
                                        Si, estoy seguro
                                        </button>
                                        <button data-modal-hide="popup-modal" type="button" class="py-0.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700 w-10 h-8">No</button>
                                    </div>
                                </div>
                            </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.0/flowbite.min.js"></script>
</body>

</html>